(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[5],{"78Xg":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resetIntelligences=a,t.refreshIntelligences=i,t.refreshIntelligencesSuccess=s,t.refreshIntelligencesFail=r;var l=n("KeKd");function a(){return{type:l.RESET_INTELLIGENCES}}function i(){return{type:l.REFRESH_INTELLIGENCES}}function s(e){return{type:l.REFRESH_INTELLIGENCES_SUCCESS,total:e.total,intelligences:e.intelligences,nextCursor:e.nextCursor,previousCursor:e.previousCursor}}function r(e){return{type:l.REFRESH_INTELLIGENCES_FAIL,error:e}}},KeKd:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.REFRESH_INTELLIGENCES_FAIL=t.REFRESH_INTELLIGENCES_SUCCESS=t.REFRESH_INTELLIGENCES=t.RESET_INTELLIGENCES=void 0;var l="intelligences/resetIntelligences";t.RESET_INTELLIGENCES=l;var a="intelligences/refreshIntelligences";t.REFRESH_INTELLIGENCES=a;var i="intelligences/refreshIntelligencesSuccess";t.REFRESH_INTELLIGENCES_SUCCESS=i;var s="intelligences/refreshIntelligencesFail";t.REFRESH_INTELLIGENCES_FAIL=s},m6yv:function(e,t,n){"use strict";var l=n("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.IntelligencesHistory=void 0,n("g9YV");var a=l(n("wCAj"));n("14J3");var i=l(n("BMrR"));n("qVdP");var s=l(n("jsC+"));n("jCWc");var r=l(n("kPKH"));n("Pwec");var o=l(n("CtXQ"));n("lUTK");var d=l(n("BvKs"));n("R9oj");var c=l(n("ECub")),u=l(n("p0pE")),f=l(n("d6i3")),g=l(n("1l/V"));n("sRBo");var m=l(n("kaz8"));n("+L6B");var p=l(n("2/Rp"));n("5NDa");var h=l(n("5rEg")),E=l(n("2Taf")),v=l(n("vZ4D")),I=l(n("l4Ni")),y=l(n("ujKo")),S=l(n("MhPg"));n("T2oS");var C=l(n("W9HT")),w=l(n("fFZ8")),b=n("Y2fQ"),R=l(n("EVdn")),M=l(n("s/Ur")),F=l(n("q1tI")),L=l(n("LlRK")),N=l(n("LvDl")),H=n("MuoO"),T=l(n("Wgwc")),k=l(n("vOnD")),D=l(n("yOXu")),x=n("78Xg"),_=n("IvyP");function P(){var e=(0,w.default)(["\n  padding: 100px 0;\n"]);return P=function(){return e},e}var A=k.default.div(P()),K=F.default.createElement("div",{style:{textAlign:"center",paddingTop:10,paddingBottom:10}},F.default.createElement(C.default,null)),B=function(e){function t(e){var n;return(0,E.default)(this,t),n=(0,I.default)(this,(0,y.default)(t).call(this,e)),n.getColumnSearchProps=function(e){return{filterDropdown:function(t){var l=t.setSelectedKeys,a=t.selectedKeys,i=t.confirm,s=t.clearFilters;return F.default.createElement("div",{style:{padding:8}},F.default.createElement(h.default,{ref:function(e){n.searchInput=e},placeholder:"Search ".concat(e),value:a[0],onChange:function(e){return l(e.target.value?[e.target.value]:[])},onPressEnter:function(){return n.handleSearch(a,i,e)},style:{width:250,marginBottom:8,display:"block"}}),F.default.createElement(p.default,{type:"primary",onClick:function(){return n.handleSearch(a&&a[0],i,e)},size:"small",style:{width:90,marginRight:8}},F.default.createElement(b.FormattedMessage,{id:"app.common.messages.search"})),F.default.createElement(p.default,{onClick:function(){return n.handleReset(s,e)},size:"small",style:{width:90}},F.default.createElement(b.FormattedMessage,{id:"app.common.messages.reset"})))},onFilterDropdownVisibleChange:function(e){e&&setTimeout(function(){return n.searchInput.select()})}}},n.getColumnCheckboxProps=function(e,t){return{filterDropdown:function(l){var a=l.setSelectedKeys,i=l.selectedKeys,s=l.confirm,r=l.clearFilters;return F.default.createElement("div",{style:{padding:8},className:"intelligences-checkboxgroup"},F.default.createElement(m.default.Group,{options:t,defaultValue:i,onChange:function(t){n.filterConditions[e]=t,a(t)}}),F.default.createElement("div",null,F.default.createElement(p.default,{type:"primary",onClick:function(){return n.handleSearch(i,s,e)},size:"small",style:{width:90,marginRight:8}},F.default.createElement(b.FormattedMessage,{id:"app.common.messages.search"})),F.default.createElement(p.default,{onClick:function(){return n.handleReset(r,e)},size:"small",style:{width:90}},F.default.createElement(b.FormattedMessage,{id:"app.common.messages.reset"}))))}}},n.handleSearch=function(e,t,l){t(),n.setState({searchText:e}),n.filterConditions[l]=e,n.search()},n.handleReset=function(e,t){e(),n.setState({searchText:""}),delete n.filterConditions[t],n.search()},n.search=function(){n.setState({selectedRowKeys:[],selectedRows:[]}),n.props.dispatch((0,x.resetIntelligences)()),n.loadMoreIntelligences(null)},n.props.dispatch((0,x.resetIntelligences)()),n.state={selectedRowKeys:[],selectedRows:[],loadingMore:!1,loadingIntelligencesData:!0,contentHeight:window.innerHeight,operationBtns:{pausing:!1,resuming:!1,deleting:!1}},n.filterConditions={},n.lastScrollHeight=0,n.resizeTimeoutHandler=void 0,(0,R.default)(window).unbind("resize"),(0,R.default)(window).bind("resize",function(){clearTimeout(n.resizeTimeoutHandler),n.resizeTimeoutHandler=setTimeout(function(){n.setState({contentHeight:window.innerHeight})},500)}),n}return(0,S.default)(t,e),(0,v.default)(t,[{key:"initIntelligencesData",value:function(){var e=this;this.props.dispatch((0,x.resetIntelligences)()),this.setState({loadingIntelligencesData:!0,selectedRowKeys:[],selectedRows:[]}),(0,_.getIntelligencesOrHistoryForManagementAPI)(void 0,this.filterConditions.url,this.filterConditions.state,50,!0).then(function(t){e.setState({loadingIntelligencesData:!1}),e.props.dispatch((0,x.refreshIntelligencesSuccess)(t))},function(t){e.setState({loadingIntelligencesData:!1}),e.props.dispatch((0,x.refreshIntelligencesFail)(t))})}},{key:"componentDidMount",value:function(){this.initIntelligencesData()}},{key:"componentDidUpdate",value:function(){var e=this;(0,R.default)(".intelligence-table-container .ant-table-body").unbind("scroll"),(0,R.default)(".intelligence-table-container .ant-table-body").bind("scroll",function(){var t=(0,R.default)(".intelligence-table-container .ant-table-body").scrollTop(),n=(0,R.default)(".intelligence-table-container .ant-table-body").outerHeight(),l=document.querySelector(".intelligence-table-container .ant-table-body"),a=l.scrollHeight;a-t-n<200&&e.props.intelligences.nextCursor&&(e.state.loadingMore||(e.lastScrollHeight=a,e.loadMoreIntelligences()))})}},{key:"componentWillUnmount",value:function(){(0,R.default)(window).unbind("resize")}},{key:"loadMoreIntelligences",value:function(e){var t=this;this.setState({loadingMore:!0}),void 0===e&&(e=this.props.intelligences.nextCursor),(0,_.getIntelligencesOrHistoryForManagementAPI)(e,this.filterConditions.url,this.filterConditions.state,50,!0).then(function(e){t.props.dispatch((0,x.refreshIntelligencesSuccess)(e)),t.setState({loadingMore:!1})},function(e){t.props.dispatch((0,x.refreshIntelligencesFail)(e)),t.setState({loadingMore:!1})})}},{key:"onDeleteAll",value:function(){var e=(0,g.default)(f.default.mark(function e(){var t,n;return f.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,this.state.selectedRows&&this.state.selectedRows.length&&(t=this.state.selectedRows.map(function(e){return e.globalId})),t&&t.length||(n=this.filterConditions.url),this.setState({operationBtns:{pausing:!1,deleting:!0,resuming:!1}}),e.next=6,(0,_.deleteIntelligencesOrHistoryForManagementAPI)(n,t,!0);case 6:this.setState({operationBtns:{pausing:!1,deleting:!1,resuming:!1}}),this.initIntelligencesData(),e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](0),this.setState({operationBtns:{pausing:!1,deleting:!1,resuming:!1}});case 13:case"end":return e.stop()}},e,this,[[0,10]])}));function t(){return e.apply(this,arguments)}return t}()},{key:"render",value:function(){var e=this,t=this.state,n=t.loadingIntelligencesData,l=t.contentHeight,f=t.loadingMore,g=this.props.intelligences,m=F.default.createElement(D.default,null),h=[(0,u.default)({title:"Target URL",dataIndex:"url",width:"40%",filteredValue:this.filterConditions.url},this.getColumnSearchProps("url")),(0,u.default)({title:(0,b.formatMessage)({id:"app.common.messages.state"}),dataIndex:"system.state",width:"15%",filteredValue:this.filterConditions.state},this.getColumnCheckboxProps("state",[{label:(0,b.formatMessage)({id:"app.common.messages.stateDraft"}),value:"DRAFT"},{label:(0,b.formatMessage)({id:"app.common.messages.stateConfigured"}),value:"CONFIGURED"},{label:(0,b.formatMessage)({id:"app.common.messages.stateFinished"}),value:"FINISHED"},{label:(0,b.formatMessage)({id:"app.common.messages.stateRunning"}),value:"RUNNING"},{label:(0,b.formatMessage)({id:"app.common.messages.stateFailed"}),value:"FAILED"},{label:(0,b.formatMessage)({id:"app.common.messages.statePaused"}),value:"PAUSED"},{label:(0,b.formatMessage)({id:"app.common.messages.stateTimeout"}),value:"TIMEOUT"}])),{title:(0,b.formatMessage)({id:"app.common.messages.analystState"}),dataIndex:"soi.state",width:"15%"},{title:"Last Modified At",dataIndex:"system.modified",render:function(e){return(0,T.default)(e).format("YYYY/MM/DD HH:mm:ss")}}],E={selectedRowKeys:this.state.selectedRowKeys,onChange:function(t,n){e.setState({selectedRowKeys:t,selectedRows:n})}};if(!n)if(g.data&&g.data.length||N.default.keys(this.filterConditions).length){var v=g&&g.total||0;this.state.selectedRows&&this.state.selectedRows.length&&(v=this.state.selectedRows.length);var I=!1;(this.state.operationBtns.pausing||this.state.operationBtns.resuming||this.state.operationBtns.deleting)&&(I=!0),v&&!n||(I=!0);var y=F.default.createElement(d.default,null,F.default.createElement(d.default.Item,null,F.default.createElement(p.default,{type:"link",onClick:function(){e.onDeleteAll()},disabled:I,loading:this.state.operationBtns.deleting},F.default.createElement(b.FormattedMessage,{id:"app.containers.Intelligences.deleteAll",values:{intelligenceNumber:v}})))),S=F.default.createElement("div",{style:{display:"inline-block"}},F.default.createElement("div",{style:{display:"inline-block"}},F.default.createElement("span",null,"Show ".concat(N.default.get(g,"data.length")," of ").concat(g.total," intelligences"))),F.default.createElement(p.default,{type:"link",onClick:function(){return e.initIntelligencesData()},disabled:n},F.default.createElement(L.default,{date:g.modified}),F.default.createElement(o.default,{type:"sync",style:{verticalAlign:"middle",marginLeft:"5px"},spin:n})));m=F.default.createElement("div",{className:"intelligence-table-container"},F.default.createElement("div",{style:{padding:"0 24px"}},F.default.createElement("div",{style:{paddingBottom:"15px"}},F.default.createElement(i.default,null,F.default.createElement(M.default,{minWidth:1028},F.default.createElement(r.default,{span:6},F.default.createElement(p.default,{onClick:function(){e.onDeleteAll()},style:{marginLeft:"10px"},disabled:I,loading:this.state.operationBtns.deleting},F.default.createElement(b.FormattedMessage,{id:"app.containers.Intelligences.deleteAll",values:{intelligenceNumber:v}}))),F.default.createElement(r.default,{span:18,style:{textAlign:"right"}},S)),F.default.createElement(M.default,{maxWidth:1028},F.default.createElement(r.default,{span:3},F.default.createElement(s.default,{overlay:y},F.default.createElement(p.default,null,F.default.createElement(o.default,{type:"menu"})))),F.default.createElement(r.default,{span:21,style:{textAlign:"right"}},S)))),F.default.createElement(a.default,{className:"",pagination:!1,bordered:!0,columns:h,rowSelection:E,dataSource:g.data,rowKey:function(e){return e.globalId},scroll:{y:l-310},onRow:function(e){return{onClick:function(){}}}}),f?K:""))}else m=F.default.createElement(A,null,F.default.createElement(c.default,{description:F.default.createElement("span",null,F.default.createElement(b.FormattedHTMLMessage,{id:"app.containers.IntelligencesHistory.empty"}))}));return F.default.createElement("div",null,m)}}]),t}(F.default.Component);t.IntelligencesHistory=B;var G=(0,H.connect)(function(e){var t=e.intelligences;return{intelligences:t}})(B);t.default=G},oZFx:function(e,t,n){"use strict";var l=n("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=l(n("m6yv")),i=n("Hx5s"),s=l(n("q1tI")),r=function(){return s.default.createElement(i.PageHeaderWrapper,null,s.default.createElement(a.default,null))};t.default=r},yOXu:function(e,t,n){"use strict";var l=n("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=s,n("cWXX");var a=l(n("/ezw")),i=l(n("q1tI"));function s(){return i.default.createElement("div",{style:{padding:"0 24px"}},i.default.createElement(a.default,{title:!1,active:!0,paragraph:{width:"100%",rows:6}}))}}}]);